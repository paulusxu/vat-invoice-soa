<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lenovo.invoice.dao.VathrowBtcpMapper" >
  <resultMap id="BaseResultMap" type="com.lenovo.invoice.domain.VathrowBtcp" >
    <id column="ID" property="id" jdbcType="INTEGER" />
    <result column="Title" property="title" jdbcType="VARCHAR" />
    <result column="TaxpayerIdentity" property="taxpayeridentity" jdbcType="VARCHAR" />
    <result column="DepositBank" property="depositbank" jdbcType="VARCHAR" />
    <result column="BankNo" property="bankno" jdbcType="VARCHAR" />
    <result column="RegisterAddress" property="registeraddress" jdbcType="VARCHAR" />
    <result column="RegisterPhone" property="registerphone" jdbcType="VARCHAR" />
    <result column="OutId" property="outid" jdbcType="VARCHAR" />
    <result column="MemberCode" property="membercode" jdbcType="VARCHAR" />
    <result column="Name" property="name" jdbcType="VARCHAR" />
    <result column="ProvinceId" property="provinceid" jdbcType="VARCHAR" />
    <result column="City" property="city" jdbcType="VARCHAR" />
    <result column="County" property="county" jdbcType="VARCHAR" />
    <result column="Address" property="address" jdbcType="VARCHAR" />
    <result column="Phone" property="phone" jdbcType="VARCHAR" />
    <result column="Zip" property="zip" jdbcType="VARCHAR" />
    <result column="OrderCode" property="orderCode" jdbcType="VARCHAR" />
    <result column="zid" property="zid" jdbcType="VARCHAR" />
    <result column="ThrowResult" property="throwResult" jdbcType="VARCHAR" />
    <result column="IsNeedMerge" property="isneedmerge" jdbcType="BIT" />
    <result column="ThrowingStatus" property="throwingStatus" jdbcType="BIT" />
    <result column="OrderStatus" property="orderStatus" jdbcType="BIT" />
    <result column="CreateTime" property="createtime" jdbcType="TIMESTAMP" />
  </resultMap>


  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    ID, Title, TaxpayerIdentity, DepositBank, BankNo, RegisterAddress, RegisterPhone, 
    OutId, MemberCode, Name, ProvinceId, City, County, Address, Phone, Zip, IsNeedMerge,
    ThrowingStatus,zid,OrderCode,OrderStatus,ThrowResult
  </sql>

  <select id="getVatInvoice2BtcpList" resultMap="BaseResultMap" parameterType="java.lang.String" >
    select 
    <include refid="Base_Column_List" />
    from vathrowbtcp
    where zid=#{zid} and OrderStatus=3 and ThrowingStatus in(0,4)
  </select>

  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    delete from vathrowbtcp
    where ID = #{id,jdbcType=INTEGER}
  </delete>




  <update id="updateByOrderCode">
    update vathrowbtcp
    set ThrowingStatus = #{status},ThrowResult=#{msg} WHERE OrderCode=#{orderCode}
  </update>

  <update id="updateOrderStatus">
    update vathrowbtcp
    set OrderStatus = #{status} WHERE OrderCode=#{orderCode}
  </update>

  <update id="updateThrowingStatus">
    update vathrowbtcp
    set ThrowingStatus = #{status} WHERE OrderCode=#{orderCode}
  </update>

  <insert id="insertVathrowBtcpSelective" parameterType="com.lenovo.invoice.domain.VathrowBtcp" >
    insert into vathrowbtcp
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="title != null" >
        Title,
      </if>
      <if test="taxpayeridentity != null" >
        TaxpayerIdentity,
      </if>
      <if test="depositbank != null" >
        DepositBank,
      </if>
      <if test="bankno != null" >
        BankNo,
      </if>
      <if test="registeraddress != null" >
        RegisterAddress,
      </if>
      <if test="registerphone != null" >
        RegisterPhone,
      </if>
      <if test="outid != null" >
        OutId,
      </if>
      <if test="membercode != null" >
        MemberCode,
      </if>
      <if test="name != null" >
        Name,
      </if>
      <if test="provinceid != null" >
        ProvinceId,
      </if>
      <if test="city != null" >
        City,
      </if>
      <if test="county != null" >
        County,
      </if>
      <if test="address != null" >
        Address,
      </if>
      <if test="phone != null" >
        Phone,
      </if>
      <if test="zip != null" >
        Zip,
      </if>
      <if test="isneedmerge != null" >
        IsNeedMerge,
      </if>
      <if test="throwingstatus != null" >
        ThrowingStatus,
      </if>
      <if test="throwresult != null" >
        ThrowResult,
      </if>
        CreateTime,
      <if test="ordercode != null" >
        OrderCode,
      </if>
      <if test="zid != null" >
        Zid,
      </if>
      <if test="orderstatus != null" >
        OrderStatus,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="title != null" >
        #{title,jdbcType=VARCHAR},
      </if>
      <if test="taxpayeridentity != null" >
        #{taxpayeridentity,jdbcType=VARCHAR},
      </if>
      <if test="depositbank != null" >
        #{depositbank,jdbcType=VARCHAR},
      </if>
      <if test="bankno != null" >
        #{bankno,jdbcType=VARCHAR},
      </if>
      <if test="registeraddress != null" >
        #{registeraddress,jdbcType=VARCHAR},
      </if>
      <if test="registerphone != null" >
        #{registerphone,jdbcType=VARCHAR},
      </if>
      <if test="outid != null" >
        #{outid,jdbcType=VARCHAR},
      </if>
      <if test="membercode != null" >
        #{membercode,jdbcType=VARCHAR},
      </if>
      <if test="name != null" >
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="provinceid != null" >
        #{provinceid,jdbcType=VARCHAR},
      </if>
      <if test="city != null" >
        #{city,jdbcType=VARCHAR},
      </if>
      <if test="county != null" >
        #{county,jdbcType=VARCHAR},
      </if>
      <if test="address != null" >
        #{address,jdbcType=VARCHAR},
      </if>
      <if test="phone != null" >
        #{phone,jdbcType=VARCHAR},
      </if>
      <if test="zip != null" >
        #{zip,jdbcType=VARCHAR},
      </if>
      <if test="isneedmerge != null" >
        #{isneedmerge,jdbcType=BIT},
      </if>
      <if test="throwingstatus != null" >
        #{throwingstatus,jdbcType=BIT},
      </if>
      <if test="throwresult != null" >
        #{throwresult,jdbcType=VARCHAR},
      </if>
      now(),
      <if test="ordercode != null" >
        #{ordercode,jdbcType=VARCHAR},
      </if>
      <if test="zid != null" >
        #{zid,jdbcType=VARCHAR},
      </if>
      <if test="orderstatus != null" >
        #{orderstatus,jdbcType=BIT},
      </if>
    </trim>
  </insert>


  <insert id="insertVathrowBtcp" parameterType="com.lenovo.invoice.domain.VathrowBtcp" >
    insert into vathrowbtcp (CreateTime,OrderCode,OrderStatus)
    values (now(),#{orderCode},#{orderStatus})
  </insert>

  <update id="updateVathrowbtcp" parameterType="map" >
    update vathrowbtcp
    <set >
      <if test="record.title != null" >
        Title = #{record.title,jdbcType=VARCHAR},
      </if>
      <if test="record.taxpayeridentity != null" >
        TaxpayerIdentity = #{record.taxpayeridentity,jdbcType=VARCHAR},
      </if>
      <if test="record.depositbank != null" >
        DepositBank = #{record.depositbank,jdbcType=VARCHAR},
      </if>
      <if test="record.bankno != null" >
        BankNo = #{record.bankno,jdbcType=VARCHAR},
      </if>
      <if test="record.registeraddress != null" >
        RegisterAddress = #{record.registeraddress,jdbcType=VARCHAR},
      </if>
      <if test="record.registerphone != null" >
        RegisterPhone = #{record.registerphone,jdbcType=VARCHAR},
      </if>
      <if test="record.outid != null" >
        OutId = #{record.outid,jdbcType=VARCHAR},
      </if>
      <if test="record.membercode != null" >
        MemberCode = #{record.membercode,jdbcType=VARCHAR},
      </if>
      <if test="record.name != null" >
        Name = #{record.name,jdbcType=VARCHAR},
      </if>
      <if test="record.provinceid != null" >
        ProvinceId = #{record.provinceid,jdbcType=VARCHAR},
      </if>
      <if test="record.city != null" >
        City = #{record.city,jdbcType=VARCHAR},
      </if>
      <if test="record.county != null" >
        County = #{record.county,jdbcType=VARCHAR},
      </if>
      <if test="record.address != null" >
        Address = #{record.address,jdbcType=VARCHAR},
      </if>
      <if test="record.phone != null" >
        Phone = #{record.phone,jdbcType=VARCHAR},
      </if>
      <if test="record.zip != null" >
        Zip = #{record.zip,jdbcType=VARCHAR},
      </if>
      <if test="record.isneedmerge != null" >
        IsNeedMerge = #{record.isneedmerge,jdbcType=BIT},
      </if>
      <if test="record.throwingstatus != null" >
        ThrowingStatus = #{record.throwingStatus,jdbcType=BIT},
      </if>
      <if test="record.throwresult != null" >
        ThrowResult = #{record.throwResult,jdbcType=VARCHAR},
      </if>
      <if test="record.zid != null" >
        Zid = #{record.zid,jdbcType=VARCHAR},
      </if>
      <if test="record.orderstatus != null" >
        OrderStatus = #{record.orderStatus,jdbcType=BIT},
      </if>
    </set>
     WHERE OrderCode = #{record.orderCode}
  </update>

</mapper>